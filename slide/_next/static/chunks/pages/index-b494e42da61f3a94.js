(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5728:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(9106)}])},9106:function(e,n,t){"use strict";t.r(n),t.d(n,{TextureScene:function(){return S},default:function(){return k}});var r=t(5893),o=t(5152),a=t.n(o),i=t(9008),l=t.n(i),s=t(9477),c=t(7294),u=t(7618),m=t(5029);let p=new s.Vector3;function v(e,n,t,r,o,a){let i=2*Math.PI*o/4,l=Math.max(a-2*o,0);p.copy(n),p[r]=0,p.normalize();let s=.5*i/(i+l),c=1-p.angleTo(e)/(Math.PI/4);return 1===Math.sign(p[t])?c*s:l/(i+l)+s+s*(1-c)}class f extends s.BoxGeometry{constructor(e=1,n=1,t=1,r=2,o=.1){if(r=2*r+1,o=Math.min(e/2,n/2,t/2,o),super(1,1,1,r,r,r),1===r)return;let a=this.toNonIndexed();this.index=null,this.attributes.position=a.attributes.position,this.attributes.normal=a.attributes.normal,this.attributes.uv=a.attributes.uv;let i=new s.Vector3,l=new s.Vector3,c=new s.Vector3(e,n,t).divideScalar(2).subScalar(o),u=this.attributes.position.array,m=this.attributes.normal.array,p=this.attributes.uv.array,f=u.length/6,d=new s.Vector3,g=.5/r;for(let r=0,a=0;r<u.length;r+=3,a+=2){i.fromArray(u,r),l.copy(i),l.x-=Math.sign(l.x)*g,l.y-=Math.sign(l.y)*g,l.z-=Math.sign(l.z)*g,l.normalize(),u[r+0]=c.x*Math.sign(i.x)+l.x*o,u[r+1]=c.y*Math.sign(i.y)+l.y*o,u[r+2]=c.z*Math.sign(i.z)+l.z*o,m[r+0]=l.x,m[r+1]=l.y,m[r+2]=l.z;let s=Math.floor(r/f);switch(s){case 0:d.set(1,0,0),p[a+0]=v(d,l,"z","y",o,t),p[a+1]=1-v(d,l,"y","z",o,n);break;case 1:d.set(-1,0,0),p[a+0]=1-v(d,l,"z","y",o,t),p[a+1]=1-v(d,l,"y","z",o,n);break;case 2:d.set(0,1,0),p[a+0]=1-v(d,l,"x","z",o,e),p[a+1]=v(d,l,"z","x",o,t);break;case 3:d.set(0,-1,0),p[a+0]=1-v(d,l,"x","z",o,e),p[a+1]=1-v(d,l,"z","x",o,t);break;case 4:d.set(0,0,1),p[a+0]=1-v(d,l,"x","y",o,e),p[a+1]=1-v(d,l,"y","x",o,n);break;case 5:d.set(0,0,-1),p[a+0]=v(d,l,"x","y",o,e),p[a+1]=1-v(d,l,"y","x",o,n)}}}}var d=t(2729),g=t(3224),x=t(1312);function h(){let e=(0,d._)(["\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  "]);return h=function(){return e},e}function y(){let e=(0,d._)(["\n    precision mediump float;\n    uniform float uTime;\n    uniform sampler2D uTexture;\n    uniform sampler2D map2;\n    uniform sampler2D uAlphaMap;\n    uniform sampler2D map;\n\n    uniform sampler2D image3;\n    uniform sampler2D image1;\n\n    uniform vec3 uColor;\n    uniform bool fond;\n    uniform float camera_x;\n    uniform int compteurCycle;\n    uniform bool filigrane;\n    varying vec2 vUv;\n    uniform vec2 _resolution;\n    \n    float A;\n    \n    float nEcran=1.;\n\n    float Reste;\n\n    #define PI 3.1415926538\n\n    vec2 SineWave( vec2 p, float A ){\n      float pi = 3.14159;\n      // float A = 0.50;\n      float w = 20.0 * pi;\n      float t = 30.0*pi/180.0;\n      float y = sin( w*p.x + t) * A; \n      return vec2(p.x, p.y+y);\n   }\n\n   vec4 getFromColor(vec2 uvloc){\n    \n    vec4 ttt = texture2D(uTexture, uvloc);\n    return ttt;\n  }\n\n  vec4 getToColor(vec2 uvloc){\n      vec2 uvloc2=vUv;\n      uvloc2.x=vUv.x* 0.3;\n      vec4 ttt = texture2D(uTexture, uvloc2);\n      return ttt;\n  }\n\n  vec4 getFromColor2(vec2 uvloc){\n    \n    vec4 ttt = texture2D(image3, uvloc);\n    return ttt;\n  }\n\n  vec4 getToColor2(vec2 uvloc){\n      vec2 uvloc2=vUv;\n      // uvloc2.x=vUv.x* 0.3;\n      vec4 ttt = texture2D(image1, uvloc2);\n      return ttt;\n  }\n\n  vec4 transition2(vec2 uv,float progress) {\n    vec2 center = vec2(0, 0);\n    float dots = 20.0;\n    vec2 uvbis=uv;\n    bool nextImage = distance(fract(uv * dots), vec2(0.5, 0.5)) < ( progress / distance(uv, center));\n    return nextImage ? getToColor(uvbis) : getFromColor(uv);\n  }\n\n  vec4 transition3(vec2 p,float progress) {\n    float strength=0.5;\n    vec4 ca = getFromColor(p);\n    vec4 cb = getToColor(p);\n    \n    vec2 oa = (((ca.rg+ca.b)*0.5)*2.0-1.0);\n    vec2 ob = (((cb.rg+cb.b)*0.5)*2.0-1.0);\n    vec2 oc = mix(oa,ob,0.5)*strength;\n    \n    float w0 = progress;\n    float w1 = 1.0-w0;\n    return mix(getFromColor2(p+oc*w0), getToColor2(p-oc*w1), progress);\n  }\n\n  vec4 transition4(vec2 p,float progress) {\n    float size= 0.04;\nfloat zoom= 50.0;\nfloat colorSeparation= 0.3;\n    float inv = 1. - progress;\n    vec2 disp = size*vec2(cos(zoom*p.x), sin(zoom*p.y));\n    vec4 texTo = getToColor(p + inv*disp);\n    vec4 texFrom = vec4(\n      getFromColor(p + progress*disp*(1.0 - colorSeparation)).r,\n      getFromColor(p + progress*disp).g,\n      getFromColor(p + progress*disp*(1.0 + colorSeparation)).b,\n      1.0);\n    return texTo*progress + texFrom*inv;\n  }\n\n  float rand (vec2 co) {\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n  }\n  \n  vec4 transitionCarreau(vec2 p,float progress) {\n    ivec2 size= ivec2(10, 10);\nfloat smoothness= 0.5;\n    float r = rand(floor(vec2(size) * p));\n    float m = smoothstep(0.0, -smoothness, r - (progress * (1.0 + smoothness)));\n    return mix(getFromColor(p), getToColor(p), m);\n  }\n  \n\n\n    void main() {\n      vec2 uv;\n\n      vec2 uv3=uv;\n      \n      uv.y=vUv.y;\n\n      Reste=uTime - 10. * floor(uTime/10.);\n\n      float dim_image;\n      float dim_image1=994.;\n      float dim_image2=1080.;\n      float dim_image3=960.;\n      dim_image1=26.29;\n      dim_image2=28.59;\n      dim_image3=28.59;\n      dim_image=(dim_image1 + dim_image2 + dim_image3 );\n\n      \n     // on se cale sur chaque image\n      if (compteurCycle==1 ){\n        uv.x=vUv.x * 0.3  ;\n      }\n      \n      else if (compteurCycle==2){\n        uv.x=vUv.x * 0.3 + (dim_image1) / dim_image;\n      }\n      \n      else if (compteurCycle==3){\n        uv.x=vUv.x * 0.3 + (dim_image1 + dim_image2) / dim_image;\n      }\n\n      \n\n\n    if ( Reste > 7. && compteurCycle!=3){\n      \n      A=0.;\n      \n      A=0.5 * sin(PI* (Reste-7.) / 3.);\n    \n      uv = SineWave( uv,A ); \n\n      if (compteurCycle==1 || compteurCycle==2){\n          //uv.x=uv.x+(Reste - 7. ) *.333/3.;\n          uv.x=uv.x+(Reste - 7. ) *.333/3.;\n      }\n      else{\n          uv.x=uv.x -(Reste - 7. ) *.666/3.;\n        \n      }\n     \n    }\n\n    float t2=0.;\n    float coeff_a=1.;\n\n    vec3 ttt = texture2D(uTexture, uv).rgb;\n    \n    //defining alpha\n\n    t2=0.;\n\n    if (compteurCycle!=4){\n      float alpha=1.;\n      if (((vUv.x - .5) * (vUv.x - .5) + (vUv.y - .5)*(vUv.y - .5)) <.2){\n        alpha=0.;\n      }\n      //we define a circle of transparency at the center\n      float d = sqrt(dot(vUv - vec2(.5,.5),vUv - vec2(.5,.5)));\n      t2 = smoothstep(.3, .3+0.1, d);\n      if (fond==true){\n        t2=0.;\n      }\n      alpha=smoothstep(0.,1.,(vUv.x - .5) * (vUv.x - .5) + (vUv.y - .5)*(vUv.y - .5));\n    }else{\n      vec3 aa = texture2D(uAlphaMap, uv).rgb;\n      t2=(aa.r +  aa.g + aa.b ) /3.;\n    }\n\n    \n    \n    // vec2 p = gl_FragCoord.xy / _resolution.xy ;\n\n    if (Reste > 7. && compteurCycle==3){\n      float progress=uTime - 3. * floor(uTime/3.);\n      // gl_FragColor = transition2(uv,progress / 2.);\n\n      vec4 aa=transitionCarreau(uv,progress / 2.);\n      if (filigrane){\n        t2=(aa.r +  aa.g + aa.b ) /6.;\n      }\n      gl_FragColor =vec4(aa.rgb,t2);\n      #include <tonemapping_fragment>\n      #include <encodings_fragment>\n    }\n    else{\n      if (filigrane){\n        t2=(ttt.r +  ttt.g + ttt.b ) /6.;\n      }\n      gl_FragColor = vec4(ttt, t2 );\n      #include <tonemapping_fragment>\n      #include <encodings_fragment>\n    }\n\n    \n\n    \n\n\n    }\n  "]);return y=function(){return e},e}let w=(0,x.g)({uTime:0,uTexture:new s.Texture,uAlphaMap:new s.Texture,map2:new s.Texture,map:new s.Texture,image3:new s.Texture,image1:new s.Texture,fond:!1,camera_x:0,compteurCycle:1,filigrane:!1,_resolution:new s.Vector2},(0,g.ID)(h()),(0,g.ID)(y()));var M=t(2959),b=t(9542),_=t(1133);function T(e){let{position:n,camera_x:t}=e,o=(0,c.useRef)();(0,c.useRef)(),(0,c.useRef)(),(0,c.useRef)();let a=(0,c.useRef)({x:0,y:0}),i=(0,c.useRef)({x:0,y:0}),l=(0,c.useRef)(1),m=(0,c.useRef)(),p=(0,c.useRef)(),v=(0,c.useRef)();(0,c.useRef)(),(0,c.useRef)();let f=(0,c.useRef)(),d=[m,p,v,f];(0,u.z)(e=>e.viewport),(0,u.A)(e=>{let{clock:n,camera:t}=e;a.current.x=-(0,b.t7)(i.current.y,0,.3),a.current.y=-(0,b.t7)(i.current.x,0,.3),o.current.rotation.x=-(.1*a.current.x),o.current.rotation.y=-(.1*a.current.y)}),(0,c.useEffect)(()=>{window.addEventListener("mousemove",e=>{i.current.x=(0,b.t7)(i.current.x,e.clientX/window.screen.width,.3),i.current.y=(0,b.t7)(i.current.y,e.clientY/window.screen.height,.3)});for(let e=0;e<d.length;e++)d[e].current.material.resolution=window.innerHeight/window.innerWidth;console.log("EnsembleImage",Date.now()/1e3)}),(0,u.A)((e,n)=>{for(let n=0;n<d.length;n++)d[n].current.material.uTime=e.clock.getElapsedTime();if(0==p.current.material.compteurCycle)for(let e=0;e<d.length;e++)d[e].current.material.compteurCycle=l.current;if(3==p.current.material.compteurCycle)for(let e=0;e<d.length;e++)d[e].current.material.uAlphaMap=h;if(Math.floor(e.clock.elapsedTime/10)!=Math.floor((e.clock.elapsedTime-n)/10)){3==l.current?l.current=1:l.current+=1;for(let e=0;e<d.length;e++)d[e].current.material.compteurCycle=l.current}p.current.position.z=8+1*Math.sin(2*Math.PI*e.clock.getElapsedTime()/10),v.current.position.z=12+1*Math.sin(2*Math.PI*e.clock.getElapsedTime()/10),f.current.position.z=12.1+1*Math.sin(2*Math.PI*e.clock.getElapsedTime()/10),e.camera.position.y=5*Math.sin(2*Math.PI*e.clock.getElapsedTime()/20),e.camera.lookAt(0,5*Math.sin(2*Math.PI*e.clock.getElapsedTime()/20),0)});let g=(0,u.D)(s.TextureLoader,"/slide/image3.png");g.colorSpace=s.SRGBColorSpace;let x=(0,u.D)(s.TextureLoader,"/slide/mask5.jpg");x.colorSpace=s.SRGBColorSpace;let h=(0,u.D)(s.TextureLoader,"/slide/maskDesert.png");x.colorSpace=s.SRGBColorSpace;let y=(0,u.D)(s.TextureLoader,"/slide/spiral.png");x.colorSpace=s.SRGBColorSpace;let w=(0,u.D)(s.TextureLoader,"/slide/ds.jpg");x.colorSpace=s.SRGBColorSpace;let M=(0,u.D)(s.TextureLoader,"/slide/terrasse.jpg");x.colorSpace=s.SRGBColorSpace;let T=(0,u.D)(s.TextureLoader,"/slide/ds.jpg");x.colorSpace=s.SRGBColorSpace;let j=(0,u.D)(s.TextureLoader,"/slide/nature_morte.jpg");return x.colorSpace=s.SRGBColorSpace,(0,r.jsxs)("group",{position:n,ref:o,children:[(0,r.jsx)(_.wI,{allowSleep:!1,gravity:[0,0,0],children:(0,r.jsx)(C,{})}),(0,r.jsxs)("mesh",{ref:m,position:[0,0,4],children:[(0,r.jsx)("planeGeometry",{args:[102.4,74.2,1,1]}),(0,r.jsx)("waveShaderMaterial",{uAlphaMap:g,map:g,map2:w,image3:T,image1:j,uTexture:g,fond:!0,toneMapped:!1,camera_x:t,compteurCycle:l.current,color:"black",filigrane:!1,_resolution:0,transition_shape:y})]}),(0,r.jsxs)("mesh",{ref:p,position:[0,0,8],children:[(0,r.jsx)("planeGeometry",{args:[102.4,74.2,1,1]}),(0,r.jsx)("waveShaderMaterial",{uAlphaMap:g,map:M,map2:w,uTexture:g,transparent:!0,fond:!1,toneMapped:!1,camera_x:t,compteurCycle:l.current,filigrane:!1,color:"black",_resolution:0,transition_shape:y,image3:T,image1:j})]}),(0,r.jsxs)("mesh",{ref:v,position:[0,0,12],children:[(0,r.jsx)("planeGeometry",{args:[102.4,74.2,1,1]}),(0,r.jsx)("waveShaderMaterial",{uAlphaMap:g,map:M,map2:w,uTexture:g,transparent:!0,fond:!1,toneMapped:!1,camera_x:t,compteurCycle:l.current,filigrane:!1,color:"black",_resolution:0,transition_shape:y,image3:T,image1:j})]}),(0,r.jsxs)("mesh",{ref:f,position:[0,0,12.1],children:[(0,r.jsx)("planeGeometry",{args:[102.4,74.2,1,1]}),(0,r.jsx)("waveShaderMaterial",{uAlphaMap:g,map:M,map2:w,uTexture:g,transparent:!0,fond:!1,toneMapped:!1,camera_x:t,compteurCycle:l.current,filigrane:!0,color:"black",_resolution:0,transition_shape:y,image3:T,image1:j})]})]})}function C(){(0,c.useRef)(0),(0,c.useRef)(0);let e=(0,c.useRef)(),n=(0,c.useRef)(1),t=(0,c.useRef)({y:0});return(0,u.A)((r,o)=>{e.current.position.y=(0,b.t7)(e.current.position.y,t.current.y,.3),Math.floor(r.clock.elapsedTime/10)!=Math.floor((r.clock.elapsedTime-o)/10)&&(3==n.current?n.current=1:n.current+=1),3==n.current?e.current.outlineColor="black":e.current.outlineColor="green"}),(0,c.useEffect)(()=>{window.addEventListener("wheel",e=>{t.current.y+=e.deltaY/100})}),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(M.x,{ref:e,scale:[3,3,3],anchorX:"center",anchorY:"middle",color:"white",toneMapped:!1,position:[0,15,13.2],font:"/slide/Roboto-Regular.ttf",outlineWidth:"1%",children:"Hello"})})}function j(){return(0,c.useMemo)(()=>({progress:{value:0,min:0,max:1,step:.1},z:{value:10,min:0,max:20,step:1},maxpolarangle:{value:.85,min:0,max:1,step:.01},x:{value:0,min:0,max:50,step:10}}),[]),(0,c.useEffect)(()=>{for(let e=0;e<110;e+=5)setTimeout(()=>{document.querySelector(".greybar").style.width=e+"vw"},10*e);setTimeout(()=>{document.querySelector(".wrapGreybar").style.display="none",document.querySelector("#div_canvas").style.visibility="visible"},8e3),console.log("Home",Date.now()/1e3)}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l(),{children:[(0,r.jsx)("title",{children:"Book A.PICHAT"}),(0,r.jsx)("link",{rel:"shortcut icon",href:"/slide/favicon.ico"})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-1 justify-center fixed top-2 right-2 bg-white rounded-full px-2 m-1 z-50 cursor-pointer",style:{height:"32px",width:"32px"},children:[(0,r.jsx)("div",{className:"w-full bg-black",style:{height:"2px"}}),(0,r.jsx)("div",{style:{height:"2px"},className:"w-full bg-black"}),(0,r.jsx)("div",{style:{height:"2px"},className:"w-full bg-black"})]}),(0,r.jsx)("div",{id:"div_canvas",style:{background:"black",height:"100vh",width:"100vw",position:"fixed"},children:(0,r.jsx)(m.Xz,{gl:{antialias:!0},camera:{near:.1,far:2e4,zoom:1,position:[0,0,20],maxPolarAngle:.85},children:(0,r.jsx)(S,{})})}),(0,r.jsx)("div",{className:"wrapGreybar",children:(0,r.jsx)("div",{className:"greybar"})})]})}function S(){var e;let n=(0,c.useRef)();function t(){for(var e=0,n=0;n<6;n+=1)e+=Math.random();return e/6}return(0,u.A)(n=>{e=n.camera.position.x}),(0,c.useEffect)(()=>{console.log(Date.now()/1e3)}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("ambientLight",{intensity:1}),(0,r.jsx)("spotLight",{position:[10,10,10],angle:45,penumbra:0}),(0,r.jsx)(T,{position:[0,0,-20],camera_x:e}),[void 0,void 0,void 0].map((e,o)=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(R,{ref:n,rotation:[Math.PI*t(),Math.PI*t(),0]},Math.random())}))]})}(0,u.e)({WaveShaderMaterial:w}),(0,u.e)({RoundedBoxGeometry:f});let R=(0,c.forwardRef)((e,n)=>{let t,o,a,i,{rotation:l,position:m}=e,p=(0,c.useRef)(),v=[],f=.1*(1+2*Math.random()),d=1+5*Math.random(),g=Math.PI*Math.random()/4,x=[25*Math.random(),25*Math.random(),25*Math.random()];return(0,c.useLayoutEffect)(()=>{g=Math.PI*Math.random()/4,a=[x[0]+50*Math.cos(g),x[1]+50*Math.sin(g),0],i=[x[0]+100*Math.cos(g)*d,x[1]+100*Math.sin(g)*d,0],o=((t=[a[0]-i[0],a[1]-i[1],a[2]-i[2]])[0]+t[1]+t[2])/3,t[0]=f*(t[0]/o),t[1]=f*(t[1]/o),t[2]=f*(t[2]/o),v=[new s.Vector3(i[0],i[1],i[2]),new s.Vector3(a[0],a[1],a[2])],p.current&&(p.current.geometry.setFromPoints(v),p.current.rotation.z=Math.PI*[2*Math.random()-1]/4)},[]),(0,u.A)(()=>{p.current&&p.current.geometry.translate(-t[0],-t[1],-t[2])}),(0,r.jsxs)("line",{ref:p,children:[(0,r.jsx)("bufferGeometry",{attach:"geometry"}),(0,r.jsx)("lineBasicMaterial",{linewidth:"10.0",color:"white"})]},Math.random())});var k=a()(()=>Promise.resolve(j),{ssr:!1})}},function(e){e.O(0,[737,623,349,774,888,179],function(){return e(e.s=5728)}),_N_E=e.O()}]);