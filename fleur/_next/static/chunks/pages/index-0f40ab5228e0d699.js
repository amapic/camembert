(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5728:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(8571)}])},8571:function(e,n,t){"use strict";t.r(n),t.d(n,{EnsembleImage:function(){return P},TextureScene:function(){return T},default:function(){return k}});var r=t(5893),a=t(5152),o=t.n(a),i=t(9477),c=t(7294),l=t(1133),u=t(7618),s=t(5029),p=t(9542),m=t(2729),f=t(3224),v=t(1312);function x(){let e=(0,m._)(["\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  "]);return x=function(){return e},e}function d(){let e=(0,m._)(["\n    precision mediump float;\n    uniform float uTime;\n    uniform sampler2D uTexture;\n    uniform sampler2D map2;\n    uniform sampler2D uAlphaMap;\n    uniform vec3 uColor;\n    uniform float prout; \n    uniform bool fond;\n    uniform float camera_x;\n    uniform int compteurCycle;\n    uniform bool filigrane;\n    varying vec2 vUv;\n    uniform vec2 _resolution;\n    \n  \n    float A;\n    \n    float nEcran=1.;\n\n    float Reste;\n    float ambientStrength = 0.1;\n    \n    float floatResolution;\n    \n    // floatResolution=resolution.x/resolution.y;\n\n    #define PI 3.1415926538\n\n    vec2 SineWave( vec2 p, float A ){\n      float pi = 3.14159;\n      // float A = 0.50;\n      float w = 20.0 * pi;\n      float t = 30.0*pi/180.0;\n      float y = sin( w*p.x + t) * A; \n      return vec2(p.x, p.y+y);\n  }\n\n\n  \n  float Point2( int nEcran2){\n    \n    vec2 centrePoint;\n    int nbDivHor=3;\n    int nbDivVer=3;\n    float coeff_a_=0.1;\n\n    vec2 p = 2.0 * gl_FragCoord.x / _resolution.xy - 1.0;\n\n    // p=p * vec2(1.0, _resolution);\n\n    // vec2 resolution = vec2(800.0, 600.0);\n\n    float d = sqrt(dot((p - vec2(.12,.5)) ,(p - vec2(.12,.5))));\n    \n     for(int i=0;i<nbDivHor;i++) {\n      centrePoint=vec2( (i+1) / nbDivHor, 1 / nbDivVer );\n\n      // d = sqrt(dot((p - vec2(centrePoint[0],centrePoint[1])) ,(p - vec2(centrePoint[0],centrePoint[1]))));\n\n      d=distance(p,centrePoint);\n\n      if (d<0.05){\n        coeff_a_=1.;\n      }\n\n       if (compteurCycle==1){\n\n        // centrePoint\n        //  a = sqrt(dot((p - vec2(centrePoint[0],.5)) ,p - vec2(centrePoint[1],.5)));\n\n         d=distance(p,centrePoint);\n         if (d<0.1){\n             p.x=p.x+0.333;\n           }\n        }\n        \n          if (compteurCycle==2){\n         float a = sqrt(dot(p - vec2(.48888,.5),p - vec2(.4888,.5)));\n\n         d=distance(p,centrePoint);\n          if (d<0.1){\n              p.x=p.x+0.333;\n            }\n         }\n        \n         if (compteurCycle==3){\n         float d = sqrt(dot(p - vec2(.8444,.5),p - vec2(.8444,.5)));\n         if (d<0.1){\n             p.x=p.x -0.666;\n           }\n         }\n      \n      \n        }\n    \n      \n      return coeff_a_;\n  }\n\n    void main() {\n      vec2 uv;\n\n      vec2 uv3=uv;\n      \n      uv.y=vUv.y;\n      \n      // uv.x=vUv.x * 1024. / 1280.;\n\n      // uv = gl_FragCoord.xy / _resolution.xy ;\n      \n  \n     \n      if (compteurCycle==1 ){\n        uv.x=vUv.x * 0.3 ;\n      }\n      \n      else if (compteurCycle==2){\n        uv.x=vUv.x * 0.3 + 0.3;\n      }\n      \n      else if (compteurCycle==3){\n        uv.x=vUv.x * 0.33 + 0.66;\n      }\n\n      Reste=uTime - 10. * floor(uTime/10.);\n\n\n    if ( uTime - 10. * floor(uTime/10.) > 7.){\n      \n      A=0.;\n      \n      A=0.5 * sin(PI* (Reste-7.) / 3.);\n    \n      uv = SineWave( uv,A ); \n\n      if (compteurCycle==1 || compteurCycle==2){\n          uv.x=uv.x+(Reste - 7. ) *.333/3.;\n      }\n      else{\n          uv.x=uv.x -(Reste - 7. ) *.666/3.;\n        \n      }\n     \n    }\n    \n\n    float t2=0.;\n    float coeff_a=1.;\n\n    if (Reste >10.){\n      // alpha=smoothstep(0.,1.,(vUv.x - .5) * (vUv.x - .5) + (vUv.y - .5)*(vUv.y - .5));\n\n      // uv=Point(uv,compteurCycle);\n\n      coeff_a=Point2(compteurCycle);\n      \n    }\n   \n      vec3 ttt = texture2D(uTexture, uv).rgb;\n      \n      \n      //defining alpha\n\n      t2=0.;\n\n      if (compteurCycle!=4){\n        float alpha=1.;\n        if (((vUv.x - .5) * (vUv.x - .5) + (vUv.y - .5)*(vUv.y - .5)) <.2){\n          alpha=0.;\n        }\n        //we define a circle of transparency at the center\n        float d = sqrt(dot(vUv - vec2(.5,.5),vUv - vec2(.5,.5)));\n        t2 = smoothstep(.3, .3+0.1, d);\n        if (fond==true){\n          t2=0.;\n        }\n        \n        alpha=smoothstep(0.,1.,(vUv.x - .5) * (vUv.x - .5) + (vUv.y - .5)*(vUv.y - .5));\n      }else{\n        // textureAlpha = texture2D(uAlphaMap, uv).rgb;\n        vec3 aa = texture2D(uAlphaMap, uv).rgb;\n        t2=(aa.r +  aa.g + aa.b ) /3.;\n      }\n\n      if (filigrane){\n        vec3 aa = texture2D(uTexture, uv).rgb;\n          \n        t2=(aa.r +  aa.g + aa.b ) /6.;\n      }\n      \n      // vec2 p = gl_FragCoord.xy / _resolution.xy ;\n      vec2 uv2=uv;\n      uv2.x=uv.x * (_resolution.x / _resolution.y);\n      \n      ttt=vec3(1.,1.,1.);\n      \n      int nbDivHor=3;\n    int nbDivVer=3;\n    vec2 centrePoint;\n    for(int i=0;i<nbDivHor;i++) {\n      centrePoint=vec2( (i+1) / nbDivHor, 0.5 );\n      if (distance(uv3 ,vec2(centrePoint[0] /3.,centrePoint[1]))  < 0.01 && compteurCycle==1){\n        // d=distance(p,centrePoint);\n        ttt=vec3(1.,0.,0.);\n        t2=0.;\n      }\n\n      if (distance(uv3 ,vec2(centrePoint[0] / 3.,centrePoint[1]))  < 0.01 && compteurCycle==2){\n        // d=distance(p,centrePoint);\n        ttt=vec3(0.,1.,0.);\n        t2=0.;\n      }\n\n      if (distance(uv3 ,vec2(centrePoint[0] / 3.,centrePoint[1]))  < 0.01 && compteurCycle==3){\n        // d=distance(p,centrePoint);\n        ttt=vec3(0.,0.,1.);\n        t2=0.;\n      }\n    }\n\n      \n      gl_FragColor = vec4(ttt, t2 );\n      #include <tonemapping_fragment>\n#include <encodings_fragment>\n    }\n  "]);return d=function(){return e},e}let h=(0,v.g)({uTime:0,uTexture:new i.Texture,prout:0,uAlphaMap:new i.Texture,map2:new i.Texture,fond:!1,camera_x:0,compteurCycle:1,filigrane:!1,_resolution:new i.Vector2},(0,f.ID)(x()),(0,f.ID)(d())),y=new i.Vector3;function g(e,n,t,r,a,o){let i=2*Math.PI*a/4,c=Math.max(o-2*a,0);y.copy(n),y[r]=0,y.normalize();let l=.5*i/(i+c),u=1-y.angleTo(e)/(Math.PI/4);return 1===Math.sign(y[t])?u*l:c/(i+c)+l+l*(1-u)}class M extends i.BoxGeometry{constructor(e=1,n=1,t=1,r=2,a=.1){if(r=2*r+1,a=Math.min(e/2,n/2,t/2,a),super(1,1,1,r,r,r),1===r)return;let o=this.toNonIndexed();this.index=null,this.attributes.position=o.attributes.position,this.attributes.normal=o.attributes.normal,this.attributes.uv=o.attributes.uv;let c=new i.Vector3,l=new i.Vector3,u=new i.Vector3(e,n,t).divideScalar(2).subScalar(a),s=this.attributes.position.array,p=this.attributes.normal.array,m=this.attributes.uv.array,f=s.length/6,v=new i.Vector3,x=.5/r;for(let r=0,o=0;r<s.length;r+=3,o+=2){c.fromArray(s,r),l.copy(c),l.x-=Math.sign(l.x)*x,l.y-=Math.sign(l.y)*x,l.z-=Math.sign(l.z)*x,l.normalize(),s[r+0]=u.x*Math.sign(c.x)+l.x*a,s[r+1]=u.y*Math.sign(c.y)+l.y*a,s[r+2]=u.z*Math.sign(c.z)+l.z*a,p[r+0]=l.x,p[r+1]=l.y,p[r+2]=l.z;let i=Math.floor(r/f);switch(i){case 0:v.set(1,0,0),m[o+0]=g(v,l,"z","y",a,t),m[o+1]=1-g(v,l,"y","z",a,n);break;case 1:v.set(-1,0,0),m[o+0]=1-g(v,l,"z","y",a,t),m[o+1]=1-g(v,l,"y","z",a,n);break;case 2:v.set(0,1,0),m[o+0]=1-g(v,l,"x","z",a,e),m[o+1]=g(v,l,"z","x",a,t);break;case 3:v.set(0,-1,0),m[o+0]=1-g(v,l,"x","z",a,e),m[o+1]=1-g(v,l,"z","x",a,t);break;case 4:v.set(0,0,1),m[o+0]=1-g(v,l,"x","y",a,e),m[o+1]=1-g(v,l,"y","x",a,n);break;case 5:v.set(0,0,-1),m[o+0]=g(v,l,"x","y",a,e),m[o+1]=1-g(v,l,"y","x",a,n)}}}}var w=t(3701),b=t(2959);function _(){return(0,c.useMemo)(()=>({progress:{value:0,min:0,max:1,step:.1},z:{value:10,min:0,max:20,step:1},maxpolarangle:{value:.85,min:0,max:1,step:.01},x:{value:0,min:0,max:50,step:10}}),[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-1 justify-center fixed top-2 right-2 bg-white rounded-full px-2 m-1 z-50 cursor-pointer",style:{height:"32px",width:"32px"},children:[(0,r.jsx)("div",{className:"w-full bg-black",style:{height:"2px"}}),(0,r.jsx)("div",{style:{height:"2px"},className:"w-full bg-black"}),(0,r.jsx)("div",{style:{height:"2px"},className:"w-full bg-black"})]}),(0,r.jsx)("div",{style:{background:"black",height:"100vh",width:"100vw",position:"fixed"},children:(0,r.jsxs)(s.Xz,{gl:{antialias:!0},camera:{near:.1,far:2e4,zoom:1,position:[0,0,20],maxPolarAngle:.85},children:[(0,r.jsx)(T,{}),(0,r.jsx)(w.z,{})]})})]})}function P(e){let{img_adress:n,position:t,camera_x:a}=e,o=(0,c.useRef)();(0,c.useRef)(),(0,c.useRef)(),(0,c.useRef)();let s=(0,c.useRef)({x:0,y:0}),m=(0,c.useRef)({x:0,y:0}),f=(0,c.useRef)(1),v=(0,c.useRef)(),x=(0,c.useRef)(),d=(0,c.useRef)();(0,c.useRef)(),(0,c.useRef)();let h=(0,c.useRef)(),y=[v,x,d,h];(0,u.z)(e=>e.viewport),(0,u.A)(e=>{let{clock:n,camera:t}=e;s.current.x=-(0,p.t7)(m.current.y,0,.3),s.current.y=-(0,p.t7)(m.current.x,0,.3),o.current.rotation.x=-(.1*s.current.x),o.current.rotation.y=-(.1*s.current.y)}),(0,c.useEffect)(()=>{window.addEventListener("mousemove",e=>{m.current.x=(0,p.t7)(m.current.x,e.clientX/window.screen.width,.3),m.current.y=(0,p.t7)(m.current.y,e.clientY/window.screen.height,.3)});for(let e=0;e<y.length;e++)y[e].current.material.resolution=window.innerHeight/window.innerWidth}),(0,u.A)((e,n)=>{v.current.material.uTime=e.clock.getElapsedTime(),x.current.material.uTime=e.clock.getElapsedTime(),d.current.material.uTime=e.clock.getElapsedTime(),h.current.material.uTime=e.clock.getElapsedTime(),0==v.current.material.compteurCycle&&(v.current.material.compteurCycle=f.current,x.current.material.compteurCycle=f.current,d.current.material.compteurCycle=f.current,h.current.material.compteurCycle=f.current),3==v.current.material.compteurCycle&&(v.current.material.uAlphaMap=b,x.current.material.uAlphaMap=b,d.current.material.uAlphaMap=b,h.current.material.uAlphaMap=b),Math.floor(e.clock.elapsedTime/10)!=Math.floor((e.clock.elapsedTime-n)/10)&&(3==f.current?f.current=1:f.current+=1,v.current.material.compteurCycle=f.current,x.current.material.compteurCycle=f.current,d.current.material.compteurCycle=f.current,h.current.material.compteurCycle=f.current),v.current.position.z=4+1*Math.sin(2*Math.PI*e.clock.getElapsedTime()/10),x.current.position.z=8+1*Math.sin(2*Math.PI*e.clock.getElapsedTime()/10),d.current.position.z=12+1*Math.sin(2*Math.PI*e.clock.getElapsedTime()/10),h.current.position.z=12.1+1*Math.sin(2*Math.PI*e.clock.getElapsedTime()/10),e.camera.position.y=5*Math.sin(2*Math.PI*e.clock.getElapsedTime()/20),e.camera.lookAt(0,5*Math.sin(2*Math.PI*e.clock.getElapsedTime()/20),0)});let g=(0,u.D)(i.TextureLoader,"concat5.jpg");g.colorSpace=i.SRGBColorSpace;let M=(0,u.D)(i.TextureLoader,"mushrooms.jpg");M.colorSpace=i.SRGBColorSpace;let w=(0,u.D)(i.TextureLoader,"mask5.jpg");w.colorSpace=i.SRGBColorSpace;let b=(0,u.D)(i.TextureLoader,"maskDesert.png");return w.colorSpace=i.SRGBColorSpace,(0,r.jsxs)("group",{position:t,ref:o,children:[(0,r.jsx)(l.wI,{allowSleep:!1,gravity:[0,0,0],children:(0,r.jsx)(C,{})}),(0,r.jsxs)("mesh",{ref:v,position:[0,0,4],children:[(0,r.jsx)("planeGeometry",{args:[102.4,74.2,1,1]}),(0,r.jsx)("waveShaderMaterial",{uAlphaMap:g,map:g,map2:b,uTexture:g,fond:!0,toneMapped:!1,camera_x:a,compteurCycle:f.current,color:"black",filigrane:!1,_resolution:0})]}),(0,r.jsxs)("mesh",{ref:x,position:[0,0,8],children:[(0,r.jsx)("planeGeometry",{args:[102.4,74.2,1,1]}),(0,r.jsx)("waveShaderMaterial",{uAlphaMap:g,map:g,map2:b,uTexture:g,transparent:!0,fond:!1,toneMapped:!1,camera_x:a,compteurCycle:f.current,filigrane:!1,color:"black",_resolution:0})]}),(0,r.jsxs)("mesh",{ref:d,position:[0,0,12],children:[(0,r.jsx)("planeGeometry",{args:[102.4,74.2,1,1]}),(0,r.jsx)("waveShaderMaterial",{uAlphaMap:g,map:g,map2:b,uTexture:g,transparent:!0,fond:!1,toneMapped:!1,camera_x:a,compteurCycle:f.current,filigrane:!1,color:"black",_resolution:0})]}),(0,r.jsxs)("mesh",{ref:h,position:[0,0,12.1],children:[(0,r.jsx)("planeGeometry",{args:[102.4,74.2,1,1]}),(0,r.jsx)("waveShaderMaterial",{uAlphaMap:g,map:g,map2:b,uTexture:g,transparent:!0,fond:!1,toneMapped:!1,camera_x:a,compteurCycle:f.current,filigrane:!0,color:"black",_resolution:0})]})]})}function T(){var e;let n=(0,c.useRef)();function t(){for(var e=0,n=0;n<6;n+=1)e+=Math.random();return e/6}return(0,u.A)(n=>{n.clock.elapsedTime,n.clock.elapsedTime>10&&n.camera.position.x,e=n.camera.position.x}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("ambientLight",{intensity:1}),(0,r.jsx)("spotLight",{position:[10,10,10],angle:45,penumbra:0}),(0,r.jsx)("axesHelper",{args:[5]}),(0,r.jsx)(P,{position:[0,0,-20],img_adress:"concat2.jpg",camera_x:e}),[void 0,void 0,void 0].map((e,a)=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(j,{ref:n,rotation:[Math.PI*t(),Math.PI*t(),0]},Math.random())}))]})}(0,u.e)({RoundedBoxGeometry:M}),(0,u.e)({WaveShaderMaterial:h});let j=(0,c.forwardRef)((e,n)=>{let t,a,o,l,{rotation:s,position:p}=e,m=(0,c.useRef)(),f=[],v=.1*(1+2*Math.random()),x=1+5*Math.random(),d=Math.PI*Math.random()/4,h=[25*Math.random(),25*Math.random(),25*Math.random()];return(0,c.useLayoutEffect)(()=>{d=Math.PI*Math.random()/4,o=[h[0]+50*Math.cos(d),h[1]+50*Math.sin(d),0],l=[h[0]+100*Math.cos(d)*x,h[1]+100*Math.sin(d)*x,0],a=((t=[o[0]-l[0],o[1]-l[1],o[2]-l[2]])[0]+t[1]+t[2])/3,t[0]=v*(t[0]/a),t[1]=v*(t[1]/a),t[2]=v*(t[2]/a),f=[new i.Vector3(l[0],l[1],l[2]),new i.Vector3(o[0],o[1],o[2])],m.current&&(m.current.geometry.setFromPoints(f),m.current.rotation.z=Math.PI*[2*Math.random()-1]/4)},[]),(0,u.A)(()=>{m.current&&m.current.geometry.translate(-t[0],-t[1],-t[2])}),(0,r.jsxs)("line",{ref:m,children:[(0,r.jsx)("bufferGeometry",{attach:"geometry"}),(0,r.jsx)("lineBasicMaterial",{linewidth:"10.0",color:"white"})]},Math.random())});function C(){(0,c.useRef)(0),(0,c.useRef)(0);let e=(0,c.useRef)(),n=(0,c.useRef)({y:0});return(0,u.A)(t=>{e.current.position.y=(0,p.t7)(e.current.position.y,n.current.y,.3)}),(0,c.useEffect)(()=>{window.addEventListener("wheel",e=>{n.current.y+=e.deltaY/100})}),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(b.x,{ref:e,scale:[3,3,3],anchorX:"center",anchorY:"middle",color:"white",toneMapped:!1,position:[0,15,8],font:"Roboto-Regular.ttf",outlineWidth:"1%",outlineColor:"green",children:"Hello"})})}var k=o()(()=>Promise.resolve(_),{ssr:!1})}},function(e){e.O(0,[737,623,632,774,888,179],function(){return e(e.s=5728)}),_N_E=e.O()}]);